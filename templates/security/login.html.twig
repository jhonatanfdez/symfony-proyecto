{% extends 'auth/base.html.twig' %}

{% block title %}Iniciar Sesión{% endblock %}

{% block content %}
    <div class="auth-header">
        <div class="auth-logo">
            <img src="{{ asset('logo-aquapanel.svg') }}" alt="Aqua Panel" class="brand-logo-img"/>
        </div>
        <div class="brand-name">Aqua <span class="accent">Panel</span></div>
        <h1 class="auth-title">Bienvenido</h1>
        <p class="auth-subtitle">Ingresa tus credenciales para continuar</p>
    </div>

    {% if error %}
        <div class="alert-custom alert-danger-custom">
            <i class="fa-solid fa-circle-exclamation me-2"></i>
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
    {% endif %}

    {% if app.user %}
        <div class="alert-custom alert-success-custom">
            <i class="fa-solid fa-circle-check me-2"></i>
            Ya estás autenticado como <strong>{{ app.user.userIdentifier }}</strong>.
            <a href="{{ path('app_logout') }}" class="text-decoration-underline">Cerrar sesión</a>
        </div>
    {% endif %}

    <form method="post" data-turbo="false">
        <div class="form-group">
            <label for="username" class="form-label">Correo electrónico</label>
            <div class="input-group-custom">
                <i class="fa-solid fa-envelope input-icon"></i>
                <input
                    type="email"
                    value="{{ last_username }}"
                    name="_username"
                    id="username"
                    class="form-control-custom"
                    autocomplete="email"
                    placeholder="correo@ejemplo.com"
                    required
                    autofocus>
            </div>
        </div>

        <div class="form-group">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-group-custom">
                <i class="fa-solid fa-key input-icon"></i>
                <input
                    type="password"
                    name="_password"
                    id="password"
                    class="form-control-custom"
                    autocomplete="current-password"
                    placeholder="••••••••"
                    required>
            </div>
        </div>

        <input type="hidden" name="_csrf_token" data-controller="csrf-protection" value="{{ csrf_token('authenticate') }}">

        <div class="checkbox-custom">
            <input type="checkbox" name="_remember_me" id="_remember_me">
            <label for="_remember_me">Recordarme</label>
        </div>

        <button class="btn-primary-custom" type="submit">
            <i class="fa-solid fa-right-to-bracket me-2"></i>
            Iniciar Sesión
        </button>
    </form>

    <div class="auth-footer">
        <p class="mb-0">
            ¿No tienes una cuenta?
            <a href="{{ path('app_register') }}">Regístrate aquí</a>
        </p>
    </div>
{% endblock %}

