{% extends 'home/base.html.twig' %}

{# Título dinámico con nombre del producto #}
{% block title %}Producto - {{ product.nombre }}{% endblock %}

{% block breadcrumbs %}
  {% include 'partials/_breadcrumbs.html.twig' with {
    items: [
      { label: 'Productos', route: 'app_product_index' },
      { label: product.nombre, active: true }
    ]
  } %}
{% endblock %}

{% block content %}
    {% set cardBody %}
        <table class="table table-bordered">
            <tbody>
                <tr>
                    <th width="25%">SKU</th>
                    <td>{{ product.sku }}</td>
                </tr>
                <tr>
                    <th>Nombre</th>
                    <td>{{ product.nombre }}</td>
                </tr>
                <tr>
                    <th>Categoría</th>
                    <td>{{ product.categoria.nombre }}</td>
                </tr>
                <tr>
                    <th>Descripción</th>
                    <td>{{ product.descripcion|nl2br ?: '<em class="text-muted">Sin descripción</em>' }}</td>
                </tr>
                <tr>
                    <th>Precio de Venta</th>
                    <td><strong class="text-success">${{ product.precio }}</strong></td>
                </tr>
                <tr>
                    <th>Costo</th>
                    <td class="text-muted">${{ product.costo }}</td>
                </tr>
                <tr>
                    <th>Stock Disponible</th>
                    <td>
                        <span class="badge {% if product.stock > 10 %}bg-success{% elseif product.stock > 0 %}bg-warning text-dark{% else %}bg-danger{% endif %}">
                            {{ product.stock }} unidades
                        </span>
                    </td>
                </tr>
                <tr>
                    <th>Estado</th>
                    <td>
                        {% if product.activo %}
                            <span class="badge bg-success">Activo</span>
                        {% else %}
                            <span class="badge bg-secondary">Inactivo</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Creado por</th>
                    <td>{{ product.createBy.name ?: product.createBy.email }}</td>
                </tr>
                <tr>
                    <th>Fecha de Creación</th>
                    <td>{{ product.createdAt ? product.createdAt|date('d/m/Y H:i') : '' }}</td>
                </tr>
                <tr>
                    <th>Última Actualización</th>
                    <td>{{ product.updatedAt ? product.updatedAt|date('d/m/Y H:i') : '<em class="text-muted">Nunca</em>' }}</td>
                </tr>
            </tbody>
        </table>
    {% endset %}

    {% set cardFooter %}
        <a class="btn btn-secondary" href="{{ path('app_product_index') }}">Volver al listado</a>
        <a class="btn btn-warning" href="{{ path('app_product_edit', {'id': product.id}) }}">Editar</a>
        {{ include('product/_delete_form.html.twig') }}
    {% endset %}

    {% include 'partials/_card.html.twig' with {
        title: 'Detalle del Producto',
        content: cardBody,
        footer: cardFooter,
        color: 'light'
    } %}
{% endblock %}
